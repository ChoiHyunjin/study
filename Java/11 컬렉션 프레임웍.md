# 11. 컬렉션 프레임웍 Collections Framework

- 데이터 모임을 저장하는 클래스들의 표준화된 설계
- JDK 1.2 컬렉션 프레임웍으로 정리됨.
- Vector, HashTable, Properties는 예전 컬렉션

## 1. 컬렉션 프레임웍의 핵심 인터페이스

컬렉션 프레임웍의 핵심 인터페이스 상속트리

![Collection Framework Hierachy](images/11%20컬렉션%20프레임웍_Collection_Framework_Hierachy.png)

- Collection
  - List
  - Set
- Map

| 인터페이스 | 특징                      | 순서 |      중복      | 구현클래스                                |
| ---------- | ------------------------- | :--: | :------------: | ----------------------------------------- |
| List       |                           |  O   |       O        | ArrayList, LinkedList, Stack, Vector 등   |
| Set        |                           |  X   |       X        | HashSet, TreeSet 등                       |
| Map        | Key와 Value의 쌍으로 저장 |  X   | Key X, Value O | HashMap,TreeMap, HashTable, Properties 등 |

### Collection 인터페이스

| Modifier and Type | Method                       | Description                                                                                                    |
| ----------------- | ---------------------------- | -------------------------------------------------------------------------------------------------------------- |
| boolean           | add(E e)                     | 객체를 Collection에 저장                                                                                       |
| boolean           | addAll(Collection c)         | Collection의 객체들을 Collection에 저장                                                                        |
| void              | clear()                      | Collection의 모든 객체 삭제                                                                                    |
| boolean           | contains(Object o)           | 객체가 Collection에 포함되어 있나?                                                                             |
| boolean           | containsAll(Collection<?> c) | Collection의 객체들이 Collection에 포함되어 있나?                                                              |
| boolean           | equals(Object o)             | 동일한 Collection 인가?                                                                                        |
| int               | hashCode()                   | Collection의 hashCode 반환                                                                                     |
| boolean           | isEmpty()                    | Collection이 비어 있는가?                                                                                      |
| Iterator<E>       | iterator()                   | Collection의 Iterator 반환                                                                                     |
| boolean           | remove(Object o)             | 지정된 객체를 삭제                                                                                             |
| boolean           | removeAll(Collection c)      | 지정된 Collection에 포함된 객체들을 삭제                                                                       |
| boolean           | retainAll(Collection c)      | 지정된 Collection에 포함된 객체만 남기고 다른 객체들은 Collection에서 삭제. 이로인해 Collection이 변하면 true. |
| int               | size()                       | Collection에 저장된 객체 갯수 반환                                                                             |
| Object[]          | toArray()                    | Collection에 젖아된 객체를 객체배열(Object[])로 반환                                                           |
| <T> T[]           | toArray(T[] a)               | 지정된 배열(T[])에 Collection의 객체를 저장해서 반환                                                           |

### List 인터페이스

| Modifier and Type | Method                              | Description                                         |
| ----------------- | ----------------------------------- | --------------------------------------------------- |
| void              | add(int index, E element)           | 지정된 위치(index)에 객체(element)를 추가           |
| boolean           | add(E e)                            |                                                     |
| boolean           | addAll(int index, Collection c)     | 지정된 위치에 컬렉션 추가                           |
| boolean           | addAll(Collection c)                |                                                     |
| E                 | get(int index)                      | 지정된 위치의 객체 반환                             |
| int               | indexOf(Object o)                   | 지정된 객체의 위치 반환 (앞에서)                    |
| int               | lastIndexOf(Object o)               | 지정된 객체의 위치 반환 (뒤에서)                    |
| ListIterator<E>   | listIterator()                      | List의 객체에 접근 할 수 있는 ListIterator 반환     |
| ListIterator<E>   | listIterator(int index)             |                                                     |
| E                 | remove(int index)                   | 지정된 위치에 있는 객체를 삭제하고, 그 객체를 반환  |
| E                 | set(int index, E element)           | 지정된 위치에 객체 저장                             |
| default void      | sort(Comparator c)                  | 지정된 비교자로 List 정렬                           |
| List<E>           | subList(int fromIndex, int toIndex) | 지정된 범위(fromIndex ~ toIndex)에 있는 객체들 반환 |

### Set 인터페이스

| Modifier and Type | Method               | Description          |
| ----------------- | -------------------- | -------------------- |
| boolean           | add(E e)             | 객체(element)를 추가 |
| boolean           | addAll(Collection c) | 컬렉션 추가          |

### Map 인터페이스

| Modifier and Type   | Method                           | Description                                                                  |
| ------------------- | -------------------------------- | ---------------------------------------------------------------------------- |
| V                   | put(K key, V value)              | Mapdp value객체를 key객체에 연결하여 저장                                    |
| void                | putAll(Map m)                    | 지정된 Map의 모든 key-value를 추가                                           |
| void                | clear()                          | Map의 모든 객체 삭제                                                         |
| boolean             | containsKey(Object key)          | 지정된 key객체와 일지하는 key가 있는가?                                      |
| boolean             | containsValue(Object value)      | 지정된 value와 일치하는 value가 있는가?                                      |
| boolean             | equals(Object o)                 | 동일한 Map인가?                                                              |
| V                   | get(Object key)                  | 지정한 key객체에 대응하는 value객체를 반환                                   |
| int                 | hashCode()                       | 해시코드 반환                                                                |
| boolean             | isEmpty()                        | Map이 비어 있는가?                                                           |
| Set<Map.Entry<K,V>> | entrySet()                       | Map에 저장되어 있는 key-value쌍을 Map.Entry타입의 객제로 저장한 set으로 반환 |
| Set<K>              | keySet()                         | Map에 저장된 모든 key객체를 반환                                             |
| Collection<V>       | values()                         | Map에 저장된 모든 value객체 반환                                             |
| V                   | remove(Object key)               | 지정한 key객체와 일지하는 key-value객체를 삭제                               |
| default boolean     | remove(Object key, Object value) |                                                                              |
| int                 | size()                           | Map에 저장된 key-value의 갯수 반환                                           |

### MapEntry 인터페이스

- Map인터페이스의 내부인터페이스
- key-value쌍을 다루기 위한 인터페이스

| Modifier and Type | Method            | Description                             |
| ----------------- | ----------------- | --------------------------------------- |
| boolean           | equals(Object o)  | 동일한 Entry인가?                       |
| K                 | getKey()          | Entry의 key객체 반환                    |
| V                 | getValue()        | Entry의 value객체 반환                  |
| int               | hashCode()        | Entry의 hashCode 반환                   |
| V                 | setValue(V value) | Entry의 value객체를 지정된 객체로 바꿈. |

## 2. ArrayList

- 기존 vector를 개선한 것, 기능적인 측면에서 동일

| Modifier and Type | Method                                       | Description                                                                                                   |
| ----------------- | -------------------------------------------- | ------------------------------------------------------------------------------------------------------------- |
|                   | ArrayList()                                  | 크기가 10인 ArrayList생성                                                                                     |
|                   | ArrayList(Collection c)                      | 지정한 컬렉션이 저장된 ArrayList 생성                                                                         |
|                   | ArrayList(int initialCapacity)               | 지정된 크기의 ArrayList생성                                                                                   |
| boolean           | add(E e)                                     | ArrayList 마지막에 객체 추가                                                                                  |
| void              | add(int index, E element)                    | 지정된 위치에 객체 추가                                                                                       |
| boolean           | addAll(Collection<? extends E> c)            | 주어진 컬렉션의 모든 객체를 추가                                                                              |
| boolean           | addAll(int index, Collection<? extends E> c) |                                                                                                               |
| void              | clear()                                      | Removes all of the elements from this list.                                                                   |
| Object            | clone()                                      | ArrayList를 복제                                                                                              |
| boolean           | contains(Object o)                           | Returns true if this list contains the specified element.                                                     |
| void              | ensureCapacity(int minCapacity)              | ArrayList의 크기가 최소한 minCapacity보다 크게 설정                                                           |
| E                 | get(int index)                               | 지정된 위치에 저장된 객체 반환                                                                                |
| int               | indexOf(Object o)                            | 지정된 객체의 위치 반환                                                                                       |
| int               | lastIndexOf(Object o)                        | 지정된 객체의 위치 반환(끝에서)                                                                               |
| boolean           | isEmpty()                                    | ArrayLis가 비어있는가?                                                                                        |
| Iterator<E>       | iterator()                                   | iterator 반환                                                                                                 |
| ListIterator<E>   | listIterator()                               | list iterator반환                                                                                             |
| ListIterator<E>   | listIterator(int index)                      | 지정된 위치부터 시작하는 list iterator반환                                                                    |
| E                 | remove(int index)                            | Removes the element at the specified position in this list.                                                   |
| boolean           | remove(Object o)                             | Removes the first occurrence of the specified element from this list, if it is present.                       |
| boolean           | removeAll(Collection<?> c)                   | 지정한 컬렉션에 저장된 것과 동일한 객체들을 ArrayList에서 제거                                                |
| boolean           | retainAll(Collection<?> c)                   | 지정한 컬렉션에 저장된 것과 동일한 객체들만 남기고 나머지 ArrayList에서 제거                                  |
| E                 | set(int index, E element)                    | 지정된 위치에 객체를 저장                                                                                     |
| int               | size()                                       | Returns the number of elements in this list.                                                                  |
| List<E>           | subList(int fromIndex, int toIndex)          | 범위(fromIndex ~ toIndex)사이에 저장된 객체를 반환                                                            |
| Object[]          | toArray()                                    | Returns an array containing all of the elements in this list in proper sequence (from first to last element). |
| <T> T[]           | toArray(T[] a)                               |                                                                                                               |
| void              | trimToSize()                                 | 용량을 크기에 맞게 줄임.(빈 공간을 제거)                                                                      |

- Vector는 공간이 부족하면 현재 크기의 두배로 공간을 새로 만든 뒤 복사.
- remove()로 중간의 원소를 제거하면, 뒤의 원소를 모두 한칸씩 복사해서 당김.

  ```java
  public Object remove(int index){
    Object oldObj = data[index];

    if(index != size-1){
      // data[index+1]에서 data[index]로 size-1 -index개 복사.
      System.arraycopy(data, index+1, data, index, size -1 -index);
    }

    data[size-1] = null;
    size--;

    return oldObj;
  }
  ```

- 예제

```java
class ArrayListEx1{
  public static void main(String[] args) {
    ArrayList list1 = new ArrayList(10);
    list1.add(new Integer(5));
    list1.add(new Integer(4));
    list1.add(new Integer(2));
    list1.add(new Integer(0));
    list1.add(new Integer(1));
    list1.add(new Integer(3));

    ArrayList list2 = new ArrayList(list1.subList(1,4));
    print(list1, list2);  // [5, 4, 2, 0, 1, 3] [4, 2, 0]

    Collections.sort(list1);  // list1과 list2를 정렬한다.
    Collections.sort(list2);  // Collections.sort(List l)
    print(list1, list2);  // [0, 1, 2, 3, 4, 5] [0, 2, 4]

    System.out.println("list1.containsAll(list2):" + list1.containsAll(list2)); // true, 모두 포함.

    list2.add("B");
    list2.add("C");
    list2.add(3, "A");
    print(list1, list2);  // [0, 1, 2, 3, 4, 5] [0, 2, 4, A, B, C]

    list2.set(3, "AA");
    print(list1, list2);  // [0, 1, 2, 3, 4, 5] [0, 2, 4, AA, B, C]

    // list1에서 list2와 겹치는 부분만 남기고 나머지는 삭제한다.
    System.out.println("list1.retainAll(list2):" + list1.retainAll(list2)); // true, list1가 변함.
    print(list1, list2);  // [0, 2, 4] [0, 2, 4, AA, B, C]

    // list2에서 list1에 포함된 객체들을 삭제한다.
    // 뒤에서 부터 삭제해야 요소들의 복사를 줄일 수 있음.
    for(int i= list2.size()-1; i >= 0; i--) {
      if(list1.contains(list2.get(i)))
        list2.remove(i);
    }
    print(list1, list2);  // [0, 2, 4] [AA, B, C]
  } // main의 끝

  static void print(ArrayList list1, ArrayList list2) {
    System.out.println("list1:"+list1);
    System.out.println("list2:"+list2);
    System.out.println();
  }
} // class
```

## 3. LinkedList

- 배열(array)의 단점

  - 크기 변경 불가.
  - 데이터 추가/삭제가 느림.

- LinkedList

  - 객체의 추가, 삭제가 빠름.
  - LinkedList는 이름과 달리 더블 링크드 리스트로 구현.
  - Doubly-Linked List의 구조
    ![doubly-Linked list](images/11%20컬렉션%20프레임웍_doubly-linked%20list.png)
    https://www.geeksforgeeks.org/doubly-linked-list/

| Modifier and Type | Method                            | Description                                                                                                                                                  |
| ----------------- | --------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                   | LinkedList()                      | Linkedlist 객체 생성.                                                                                                                                        |
|                   | LinkedList(Collection C)          | 컬렉션을 포함하는 Linkedlist 객체 생성.                                                                                                                      |
| boolean           | add(E e)                          | Appends the specified element to the end of this list.                                                                                                       |
| void              | add(int index, E element)         | Inserts the specified element at the specified position in this list.                                                                                        |
| boolean           | addAll(Collection c)              | Appends all of the elements in the specified collection to the end of this list, in the order that they are returned by the specified collection's iterator. |
| boolean           | addAll(int index, Collection c)   | Inserts all of the elements in the specified collection into this list, starting at the specified position.                                                  |
| void              | clear()                           | Removes all of the elements from this list.                                                                                                                  |
| boolean           | contains(Object o)                | Returns true if this list contains the specified element.                                                                                                    |
| E                 | get(int index)                    | Returns the element at the specified position in this list.                                                                                                  |
| int               | indexOf(Object o)                 | Returns the index of the first occurrence of the specified element in this list, or -1 if this list does not contain the element.                            |
| int               | lastIndexOf(Object o)             | Returns the index of the last occurrence of the specified element in this list, or -1 if this list does not contain the element.                             |
| ListIterator<E>   | listIterator(int index)           | Returns a list-iterator of the elements in this list (in proper sequence), starting at the specified position in the list.                                   |
| E                 | remove(int index)                 | Removes the element at the specified position in this list.                                                                                                  |
| boolean           | remove(Object o)                  | Removes the first occurrence of the specified element from this list, if it is present.                                                                      |
| E                 | set(int index, E element)         | Replaces the element at the specified position in this list with the specified element.                                                                      |
| int               | size()                            | Returns the number of elements in this list.                                                                                                                 |
| Object[]          | toArray()                         | LinkedList에 저장된 객체들을 배열로 반환                                                                                                                     |
| <T> T[]           | toArray(T[] a)                    | 지정한 배열에 LinkedList에 저장된 객체들을 저장                                                                                                              |
| E                 | element()+                        | List의 첫번째 요소 반환                                                                                                                                      |
| boolean           | offer(E e)+                       | List 끝에 객체 추가                                                                                                                                          |
| E                 | peek()+                           | Linkedlist의 첫번째 요소를 반환                                                                                                                              |
| E                 | poll()+                           | Linkedlist의 첫번째 요소를 반환하고, 제거                                                                                                                    |
| E                 | remove()+                         | 첫 번째 요소를 제거                                                                                                                                          |
| void              | addFirst(E e)\*                   | Inserts the specified element at the beginning of this list.                                                                                                 |
| void              | addLast(E e)\*                    | Appends the specified element to the end of this list.                                                                                                       |
| Iterator<E>       | descendingIterator()\*            | 역순으로 조회하기 위한 내림차순 Iterrator를 반환                                                                                                             |
| E                 | getFirst()\*                      | Returns the first element in this list.                                                                                                                      |
| E                 | getLast()\*                       | Returns the last element in this list.                                                                                                                       |
| boolean           | offerFirst(E e)\*                 | 맨 앞에 객체 추가                                                                                                                                            |
| boolean           | offerLast(E e)\*                  | 맨 뒤에 객체 추가                                                                                                                                            |
| E                 | peekFirst()\*                     | 첫 번째 요소를 반환                                                                                                                                          |
| E                 | peekLast()\*                      | 마지막 요소를 반환                                                                                                                                           |
| E                 | pollFirst()\*                     | 첫 번째 요소를 반환 후 제거                                                                                                                                  |
| E                 | pollLast()\*                      | 마지막 요소를 반환 후 제거                                                                                                                                   |
| E                 | pop()\*                           | removeFrist()                                                                                                                                                |
| void              | push(E e)\*                       | addFrist()                                                                                                                                                   |
| E                 | removeFirst()\*                   | 첫 번째 요소를 제거                                                                                                                                          |
| E                 | removeLast()\*                    | 마지막 요소를 제거                                                                                                                                           |
| boolean           | removeFirstOccurrence(Object o)\* | 첫 번째로 일치하는 요소를 제거                                                                                                                               |
| boolean           | removeLastOccurrence(Object o)\*  | 마지막으로 일치하는 요소를 제거                                                                                                                              |

\+는 Queue인터페이스, \*는 Dequeue 인터페이스

성능 차이

| 컬렉션     | 읽기(접근시간) | 추가/삭제 | 비고                                               |
| ---------- | :------------: | :-------: | -------------------------------------------------- |
| ArrayList  |      빠름      |   느림    | 순차적 추가/삭제는 더 빠름, 비효율적인 메모리 사용 |
| LinkedList |      느림      |   빠름    | 데이터가 많을 스록 접근성 떨어짐                   |

## 4. Stack과 Queue

![Stack과 Queue](images/11%20컬렉션%20프레임웍_Stack_Queue.png)

Stack 메서드

| Modifier and Type | Method           | Description                                                           |
| ----------------- | ---------------- | --------------------------------------------------------------------- |
| boolean           | empty()          | Stack이 비어있는가?                                                   |
| E                 | peek()           | Linkedlist의 첫번째 요소를 반환(비었을 때는 EmptyStackException 발생) |
| E                 | pop()            | 맨 앞에 값 반환 후 제거(비었을 때는 EmptyStackException 발생)         |
| void              | push(E e)        | 맨 앞의 값 추가                                                       |
| int               | search(Object o) | 객체를 찾아서 위치를 반환, 못찾으면 -1                                |

Queue 메서드

| Modifier and Type | Method     | Description                                                           |
| ----------------- | ---------- | --------------------------------------------------------------------- |
| boolean           | add(E e)   | 객체를 Queue에 저장. 공간 부족하면 IllegalStateException 발생         |
| E                 | remove()   | 첫 번째 요소를 반환 후 제거. (비어있으면 NoSuchElementException 발생) |
| E                 | element()  | List의 첫번째 요소 반환. (비어있으면 NoSuchElementException 발생)     |
| boolean           | offer(E e) | Queue에 객체 추가                                                     |
| E                 | poll()     | Queue에서 객체 반환하고, 제거 (비어있으면 null반환)                   |
| E                 | peek()     | Queue에서 객체를 반환 (비어있으면 null반환)                           |

인터페이스를 구현한 클래스 찾기

![Queue_API](images/11%20컬렉션%20프레임웍_Queue_API.png)

All Known Implementing Classes가 모두 Queue를 구현한 클래스.

```java
// 적당한 것을 골라 객체를 생성하면 됨.
Queue q = new LinkedList();
```

### 스택과 큐의 활용

> 스택 - 수식계산, 수식괄호검사, Undo/Redo, 브라우저의 앞으로/뒤로  
> 큐 - 최근 사용 문서, 작업 대기목록, 버퍼(buffer)

예시

```java
public class ExpValidCheck {
  public static void main(String[] args) {
    Stack st = new Stack();
    String expression = "((2+3)*1)+3";

    try {
      for(int i=0; i < expression.length();i++){
        char ch = expression.charAt(i);

        if(ch=='('){
          st.push(ch+"");
        } else if(ch==')') {
          st.pop();
        }
      }

      if(st.isEmpty()){
        System.out.println("괄호가 일치합니다.");
      } else {
        System.out.println("괄호가 일치하지 않습니다.");
      }

    } catch (EmptyStackException e) {
      System.out.println("괄호가 일치하지 않습니다.");
    } // try
  }
}
```

### PriorityQueue

- 저장한 순서와 무관하게 우선순위가 높은 것부터 인출.
- null은 저장 불가
- heap 구조로 구현

```java
Queue pq = new PriorityQueue();
pq.offer(3);
pq.offer(1);
pq.offer(5);
pq.offer(2);
pq.offer(4);
System.out.println(pq); // [1, 2, 3, 4, 5]
```

### Deque(Double-Ended Queue)

![Deque](images/11%20컬렉션%20프레임웍_Deque.png)

| Stack  | Queue   | Deque       |
| ------ | ------- | ----------- |
| push() | offer() | offerLast() |
| pop()  | -       | pollLast()  |
| -      | poll()  | pollFirst() |
| -      | peek()  | peekFirst() |
| peek() | -       | peekLast()  |

## 5. Iterator, ListIterator, Enumeration

### Iterator

- 컬렉션에 저장된 요소들을 읽어오는 방법
- 각 요소에 접근하는 기능을 가짐.
- 컬렉션의 요소를 읽어오는 방법을 통일해, 코드 재사용성을 높임.

```java
public interface Iterator{
  boolean hasNext();  // 읽어 올 요소가 남았는가?
  Object next();      // 다음 요소를 읽음.
  void remove();      // next()로 읽어 온 요소를 삭제.
}

public interface Collection{
  // ...
  public Iterator iterator()
  // ...
}
```

```java
List list = new ArrayList();  // List로 선언해 구현체를 바꿔도 안전한 코드 작성.
Iterator it = list.iterator();

while(it.hasNext()){
  System.out.println(it.next());
}
```

```java
Map map = new HashMap();
Iterator it = map.ketSet().iterator();
```

### ListIterator와 Enumeration

> Enumeration - Iterator의 구버전, 기능적 동일  
> ListIterator - Iterator에 양방향 조회기능 추가(List를 구현한 경우에만 사용 가능)

| Enumeration               | 설명                 |
| ------------------------- | -------------------- |
| boolean hasMoreElements() | Iterator의 hasNext() |
| Object nextElements()     | Iterator의 next()    |

ListIterator

| Type    | Method          | Description                                                    |
| ------- | --------------- | -------------------------------------------------------------- |
| void    | add(E e)        | 컬렉션에 객체 추가 (선택적 기능 - 구현할 필요 없음.)           |
| boolean | hasNext()       | 다음 요소가 있는가?                                            |
| boolean | hasPrevious()   | 이전 요소가 있는가?                                            |
| E       | next()          | 다음 요소를 읽음.                                              |
| E       | previous()      | 이전 요소를 읽음.                                              |
| int     | nextIndex()     | 다음 요소의 index                                              |
| int     | previousIndex() | 이전 요소의 index                                              |
| void    | remove()        | next() 또는 previous()로 읽은 요소를 삭제 (선택적 기능)        |
| void    | set(E e)        | next() 또는 previous()로 읽은 요소를 객체로 변경 (선택적 기능) |

```java
List list = new ArrayList();
ListIterator it = list.listIterator();

while(it.hasNext()){
  System.out.println(it.next());      // 순방향으로 출력
}

while(it.hasPrevious()){
  System.out.println(it.previous());  // 역방향으로 출력
}
```

```java
// 선택적 기능을 구현하지 않을 시
public void remove(){
  throw new UnsupportedOperationException();
}
```

next() 없이 remove()를 사용하면 IllegalStateException 발생

복사를 할 때는 next()만 쓰면 되지만, 이동을 할 때는 next()와 remove()를 이용해 구현 할 수 있음.

## 6. Arrays

배열을 다루는데 유용한 메서드

### 배열의 복사 - copyOf(), copyOfRange()

```java
int[] arr = {0,1,2,3,4};
int[] arr2 = Arrays.copyOf(arr, arr.length);  // arr2 = [0,1,2,3,4]
int[] arr3 = Arrays.copyOfRange(arr, 2, 4);   // arr3 = [2,3]
```

### 배열 채우기 - fill(), setAll()

```java
int[] arr = new int[5];
Arrays.fill(arr, 9);    // arr = [9,9,9,9,9]
Arrays.setAll(arr, () -> (int)(Math.random()*5)+1); // arr = [1,5,2,1,1]
```

### 배열의 정렬과 검색 - sort(), binarySerch()

```java
int[] arr = {3,2,0,1,4}l
int idx = Arrays.binarySerch(arr, 2); // idx = -5, 잘못된 결과

Arrays.sort(arr);
System.out.println(Arrays.toString(arr)); // [0, 1, 2, 3, 4]
int idx = Arrays.binarySerch(arr, 2);     // idx = 2
```

### 문자열의 비교와 출력 - equals(), toString()

```java
int[] arr = {0,1,2,3,4};
int[][] arr2D = {{11,12},{21,22}};

System.out.println(Arrays.toString(arr));   // [0, 1, 2, 3, 4]
System.out.println(Arrays.toString(arr2D)); //  [[11, 12], [21, 22]]
```

```java
String[][] str2D = new Stirng[][]{{"aaa", "bbb"}, {"AAA", "BBB"}};
String[][] str2D2 = new Stirng[][]{{"aaa", "bbb"}, {"AAA", "BBB"}};

System.out.println(Arrays.equals(str2D,str2D2));      // false, euqals는 일차원 배열만 비교
System.out.println(Arrays.deepEquals(str2D,str2D2));  // true
```

- equals로는 1차원 배열을 비교하므로 주소값이 달라 false.

### 배열을 List로 변환 - asList(Object... a)

```java
List list = Arrays.asList(new Intager[]{1,2,3,4,5});  // list = [1,2,3,4,5]
List list = Arrays.asList(1,2,3,4,5);                 // list = [1,2,3,4,5]
list.add(6);  // UnsupportedoperationException 발생
```

- asList()가 반환한 List는 크기 변경 불가.
- 내용 변경 가능.

```java
List list = new ArrayList(Arrays.asList(1,2,3,4,5));

//int
int[] arr = {0,1,2,3,4};
List<Integer> list = new ArrayList<>();
for(int a : arr){
  list.add(a);
}
```

- 새 list를 만들어 크기 변경 가능.

### parallelXXX(), spliterator(), stream()

- parallelXXX() - 여러 쓰레드로 나누어 작업 처리.
- spliterator() - 여러 쓰레드가 처리 할 수 있게 하나의 작업을 여러 작업으로 나는 Spliterator를 반환
- stream() - 컬렉션을 스트림으로 변환

## 7. Comparator와 Comparable

- 컬렉션을 정렬하는데 필요한 메서드를 정의
- 두 객체를 비교하는 목적
- 같으면 0, 비교하는 값보다 작으면 음수, 크면 양수

> Comparable - 기본 정렬기준을 구현하는데 사용  
> Comparator - 기본 정렬기준 외 다른 기준으로 정렬하고자할 때 사용

```java
public interface Comparator{
  int compare(Object o1, Object o2);
  boolean equals(Object obj);
}

public interface Comparable{
  public int compareTo();
}
```

```java
static void sort(Object[] a);       // 객체가 구현한 Comparable에 의한 정렬
static void sort(Object[] a, Comparator c); // 지정한 Comparator에 의한 정렬
```

```java
// String은 대소문자 구분 없는 Comparator 제공
Arrays.sort(strArr, String.CASE_INSENSITIVE_ORDER); // 대소문자 구분없이 정렬

// 내림차순 구현
class Descending implements Comparator{
  public int compare(Object o1, Object o2){
    if(o1 instanceof Comparable && o2 instanceof Comparable){
      Comparable c1 = (Comparable) o1;
      Comparable c2 = (Comparable) o2;
      return c1.compareTo(c2) * -1; // -1을 곱해 기본 정렬방식의 역방향
    }
    return -1;
  }
}
```

## 8. HashSet

- 대표적인 Set 인터페이스 구현 컬렉션
- 중복 요소를 저장하지 않음.

| Type        | Method                                         | Description                                                             |
| ----------- | ---------------------------------------------- | ----------------------------------------------------------------------- |
|             | HashSet()                                      | HashSet 생성                                                            |
|             | HashSet(Collection c)                          | 지정한 컬렉션이 저장된 HashSet 생성                                     |
|             | HashSet(int initialCapacity)                   | 지정된 크기의 HashSet생성                                               |
|             | HashSet(int initialCapacity, float loadFactor) | 초기용량과 loadFactor를 지정 후 HashSet생성                             |
| boolean     | add(E e)                                       | HashSet에 객체 추가                                                     |
| boolean     | addAll(Collection<? extends E> c)              | 주어진 컬렉션의 모든 객체를 추가 (합집합)                               |
| void        | clear()                                        | Removes all of the elements                                             |
| Object      | clone()                                        | HashSet을 복제(얕은 복사)                                               |
| boolean     | contains(Object o)                             | 지정된 객체가 있는가?                                                   |
| boolean     | containsAll(Collection c)                      | 컬렉션에 모든 객체가 있는가?                                            |
| boolean     | isEmpty()                                      | HashSet이 비어있는가?                                                   |
| Iterator<E> | iterator()                                     | iterator 반환                                                           |
| E           | remove(int index)                              | 지정한 객체를 HashSet에서 제거                                          |
| boolean     | removeAll(Collection<?> c)                     | 지정한 컬렉션에 저장된 것과 동일한 객체들을 HashSet에서 제거 (차집합)   |
| boolean     | retainAll(Collection<?> c)                     | 지정한 컬렉션과 동일한 객체들만 남기고 나머지 HashSet에서 제거 (교집합) |
| int         | size()                                         | 저장된 객체의 갯수를 반환                                               |
| Object[]    | toArray()                                      | 저장된 객체를 배열로 반환                                               |
| <T> T[]     | toArray(T[] a)                                 |                                                                         |

- loadFactor를 0.8로 지정하면 저장공간이 80%가 채워졌을 때, 공간을 두배로 확장.(기본값은 0.75)

- 저장한 순서를 유지하고 싶으면 LinkedHashSet을 사용.

```java
class HashSetEx4{
  public static void main(String[] args){
    HashSet set = new HashSet();

    set.add(new String("abc"));
    set.add(new String("abc"));
    set.add(new Person("David", 10));
    set.add(new Person("David", 10));
  }
}

class Person{
  Sring name;
  int age;

  Person(String name, int age){
    this.name = name;
    this.age = age;
  }

  public boolean equls(Objec obj){
    if(obj instanceof Person){
      Person temp = (Person)obj;
      return name.equals(temp.name) && age==tmp.age;
    }

    return false;
  }

  public int hashCode(){
    // return (name+age).hashCode(); // String의 해쉬코드
    return Objects.hash(name, age); // int hash(Object... values); JDK 1.8부터 가능
  }
}
```

- HashSet의 add메서드는 새로운 요소를 추가하기 전에 기존 요소와 같은지 판별하기 위해 equals()와 hashCode()를 호출 하기때문에 equals()와 hashCode()를 오버라이딩 해야 함.

- hashCode()의 조건
  1. 실행 중인 애플리케이션 내의 동일한 객체에 대해서 여러번 hashCode()를 호출해도 항상 같은 int 값을 반환. (실행시마다 같을 필요는 없음)
     - String의 hashCode()는 문자열로 해쉬를 만들어 항상 같음. Object클래스는 객체의 주소로 해쉬를 만들어 실행시마다 다름.
  2. equals()로 비교해서 true를 반환한 두 객체의 hashCode()는 같음.
  3. equals()로 비교해서 false를 반환한 두 객체는 해쉬 int값이 같아도 되지만, 성능을 위해 달라야 좋음.

## 9. TreeSet

- 이진 검색 트리(binary search tree) 구조로 데이터를 저장하는 컬렉션 클래스.
- 레드-블랙 트리로 구현되어 있음.

![binary search tree](images/11%20컬렉션%20프레임웍_binary%20search%20tree.png)

- 부모보다 작은 노드는 왼쪽에, 큰 노드는 오른쪽에 저장
- 모든 노드는 최대 두 개의 자식 노드를 가짐.
- 노드의 추가, 삭제에 시간이 걸림.
- 검색(범위 검색)과 정렬에 유리
- 중복된 값을 저장하지 못함.
- 왼쪽 -> 부모 -> 오른쪽으로 순회하면 오른차순 정렬.

| Modifier and Type     | Method                                                                         | Description                                                                       |
| --------------------- | ------------------------------------------------------------------------------ | --------------------------------------------------------------------------------- |
|                       | TreeSet()                                                                      | 기본 생성자                                                                       |
|                       | TreeSet(Collection c)                                                          | 주어진 컬렉션을 저장하는 생성자                                                   |
|                       | TreeSet(Comparator comparator)                                                 | 주어진 정렬 조건으로 정렬하는 생성자                                              |
|                       | TreeSet(SortedSet<E> s)                                                        | 주어진 SortedSet을 구현한 컬렉션을 저장하는 생성자                                |
| boolean               | add(E e)                                                                       | 객체 추가                                                                         |
| boolean               | addAll(Collection c)                                                           | 컬렉션 추가                                                                       |
| E                     | ceiling(E e)                                                                   | 지정된 객체와 같은 객체를 반환, 없으면 가장 가까운 큰 값 반환, 없으면 null        |
| E                     | floor(E e)                                                                     | 지정된 객체와 같은 객체를 반환, 없으면 가장 가까운 작은 값 반환, 없으면 null      |
| E                     | higher(E e)                                                                    | 지정된 객체보다 큰 값을 가진 가장 가까운 객체 반환, 없으면 null                   |
| E                     | lower(E e)                                                                     | 지정된 객체보다 작은 값중 가장 가까운 객체 반환, 없으면 null                      |
| void                  | clear()                                                                        | Removes all of the elements from this set.                                        |
| Object                | clone()                                                                        | Returns a shallow copy of this TreeSet instance.                                  |
| Comparator<? super E> | comparator()                                                                   | 정렬 기준(comparator())을 반환                                                    |
| boolean               | contains(Object o)                                                             | 지정된 객체가 있는가?                                                             |
| NavigableSet<E>       | descendingSet()                                                                | TreeSet을 역순으로 정렬해서 반환                                                  |
| Iterator<E>           | descendingIterator()                                                           | Returns an iterator over the elements in this set in descending order.            |
| E                     | first()                                                                        | 정렬된 순서에서 첫 번째 객체를 반환                                               |
| E                     | last()                                                                         | 정렬된 순서에서 마지막 객체를 반환                                                |
| E                     | pollFirst()                                                                    | TreeSet의 첫번째 요소 반환(가장 작은 값)                                          |
| E                     | pollLast()                                                                     | TreeSet의 마지막 요소 반환(가장 큰 값                                             |
| SortedSet<E>          | headSet(E toElement)                                                           | 지정된 객체보다 작은 값의 객체들을 반환                                           |
| NavigableSet<E>       | headSet(E toElement, boolean inclusive)                                        | 지정된 객체보다 작은 값의 객체들을 반환, inclusive가 ture면 같은 값의 객체도 포함 |
| SortedSet<E>          | tailSet(E fromElement)                                                         | 지정된 객체보다 큰 값의 객체들을 반환                                             |
| NavigableSet<E>       | tailSet(E fromElement, boolean inclusive)                                      | 지정된 객체보다 큰 값의 객체들을 반환, inclusive가 ture면 같은 값의 객체도 포함   |
| boolean               | isEmpty()                                                                      | 비어 있는가?                                                                      |
| Iterator<E>           | iterator()                                                                     | Returns an iterator over the elements in this set in ascending order.             |
| boolean               | remove(Object o)                                                               | Removes the specified element from this set if it is present.                     |
| int                   | size()                                                                         | Returns the number of elements in this set (its cardinality).                     |
| Spliterator<E>        | spliterator()                                                                  | Creates a late-binding and fail-fast Spliterator over the elements in this set.   |
| SortedSet<E>          | subSet(E fromElement, E toElement)                                             | 검색 범위(from 이상 to 미만)의 결과를 반환                                        |
| NavigableSet<E>       | subSet(E fromElement, boolean fromInclusive, E toElement, boolean toInclusive) | 검색범위(form ~ to)의 결과를 반환, ture면 포함.                                   |

## 10. HashMap과 Hashtable

- Hashtable은 레거시

> key - 컬랙션 내에 유일  
> value - 중복 허용

```java
public class HashMap extends AbstractMap implements Map, Cloneable, Serializeable{
  transient Entry[] table;
  // ...
  static class Entry implements Map.Entry{
    final Object key;
    Object value;
    // ...
  }
}
```

| Modifier and Type   | Method                                         | Description                                                                                         |
| ------------------- | ---------------------------------------------- | --------------------------------------------------------------------------------------------------- |
|                     | HashMap()                                      | 기본 생성자 initial capacity (16) and the default load factor (0.75).                               |
|                     | HashMap(int initialCapacity)                   | Constructs an empty HashMap with the specified initial capacity and the default load factor (0.75). |
|                     | HashMap(int initialCapacity, float loadFactor) | Constructs an empty HashMap with the specified initial capacity and load factor.                    |
|                     | HashMap(Map<? extends K,? extends V> m)        | 지정된 맵을 포함하는 hashMap 생성                                                                   |
| void                | clear()                                        | Removes all of the mappings from this map.                                                          |
| Object              | clone()                                        | Returns a shallow copy of this HashMap instance: the keys and values themselves are not cloned.     |
| boolean             | containsKey(Object key)                        | key가 포함 되어 있는가?                                                                             |
| boolean             | containsValue(Object value)                    | value가 포함 되어 있는가?                                                                           |
| Set<Map.Entry<K,V>> | entrySet()                                     | Entry(key, value)를 Set으로 반환                                                                    |
| V                   | get(Object key)                                | 지정된 key값의 value를 반환. 없으면 null                                                            |
| boolean             | isEmpty()                                      | Returns true if this map contains no key-value mappings.                                            |
| Set<K>              | keySet()                                       | key를 Set으로 반환                                                                                  |
| V                   | put(K key, V value)                            | 지정된 key에 value를 저장                                                                           |
| void                | putAll(Map<? extends K,? extends V> m)         | Map에 저장된 모든 요소를 저장                                                                       |
| V                   | remove(Object key)                             | Removes the mapping for the specified key from this map if present.                                 |
| int                 | size()                                         | Returns the number of key-value mappings in this map.                                               |
| Collection<V>       | values()                                       | 모든 value를 컬렉션으로 반환                                                                        |

code 참조 - <https://github.com/castello/javajungsuk3/blob/master/source/ch11/HashMapEx2.java>

### 해싱과 해시함수

- 해싱 - 해시함수를 이용해서 데이터를 해시 테이블에 저장하고 검색하는 것
- 해싱을 구현한 컬렉션 클래스 - HashSet, HashMap, Hashtable

![hashtable](images/11%20컬렉션%20프레임웍_hashtable.png)

- 배열과 링크드 리스트의 조합

1. 검색하고자 하는 값을 키로 해시함수 호출.
2. 해시코드로 해당 값이 저당되어 있는 링크드 리스트를 찾음.
3. 링크드 리스트에서 일치하는 값을 찾음.

새로운 클래스를 정의할 때

- equals()를 오버라이딩 하면 hashCode()도 오버라이딩해서 equals() 결과가 true인 두 객체의 hashCode()의 값이 같게 해야 함.

## 11. TreeMap

- 이진검색트리로 키와 값의 쌍을 저장한 맵
- 검색은 HashMap이 빠르고, 범위검색이나 정렬은 TreeMap이 빠름.

| Modifier and Type     | Method                                                                 | Description                                                                            |
| --------------------- | ---------------------------------------------------------------------- | -------------------------------------------------------------------------------------- |
|                       | TreeMap()                                                              | 생성자                                                                                 |
|                       | TreeMap(Comparator<? super K> comparator)                              | Comparator를 기준으로 정렬하는 TreeMap                                                 |
|                       | TreeMap(Map<? extends K,? extends V> m)                                | 주어진 Map을 포함하는 TreeMap                                                          |
|                       | TreeMap(SortedMap<K,? extends V> m)                                    | 주어진 SortedMap을 포함하는 TreeMap                                                    |
| Map.Entry<K,V>        | ceilingEntry(K key)                                                    | 지정된 key와 일치하거나 큰 것 중 제일 가까운 것의 Entry 반환, 없으면 null              |
| K                     | ceilingKey(K key)                                                      | 지정된 key와 일치하거 큰 것 중 제일 가까운 것의 key를 반환, 없으면 null                |
| void                  | clear()                                                                | Removes all of the mappings from this map.                                             |
| Object                | clone()                                                                | Returns a shallow copy of this TreeMap instance.                                       |
| Comparator<? super K> | comparator()                                                           | 정렬 기준이 되는 comparator() 반환, 없으면 null                                        |
| boolean               | containsKey(Object key)                                                | key가 포함 되어 있는가?                                                                |
| boolean               | containsValue(Object value)                                            | value가 포함 되어 있는가?                                                              |
| NavigableSet<K>       | descendingKeySet()                                                     | 내림차순 key Set 반환                                                                  |
| Set<Map.Entry<K,V>>   | entrySet()                                                             | TreeMap의 모든 Entry를 Set으로 반환                                                    |
| Map.Entry<K,V>        | firstEntry()                                                           | 첫번째(가장 작은) Entry 반환                                                           |
| K                     | firstKey()                                                             | 첫번재(가장 작은) key 반환                                                             |
| Map.Entry<K,V>        | floorEntry(K key)                                                      | 지정된 key와 일치하거나 작은 것 중 제일 가까운 것의 Entry 반환, 없으면 null            |
| K                     | floorKey(K key)                                                        | 지정된 key와 일치하거나 작은 것 중 제일 가까운 것의 key 반환, 없으면 null              |
| V                     | get(Object key)                                                        | 지정된 key의 value 반환                                                                |
| SortedMap<K,V>        | headMap(K toKey)                                                       | 처음부터 지정된 key까지 범위의 SortedMap을 반환. (toKey는 미포함)                      |
| NavigableMap<K,V>     | headMap(K toKey, boolean inclusive)                                    | 처음부터 지정된 key까지 범위의 NavigableMap 반환. inclusive가 true면 toKey 포함.       |
| Map.Entry<K,V>        | higherEntry(K key)                                                     | 지정된 key보다 큰 key 중에서 가장 가까운 Entry 반환, 없으면 null                       |
| K                     | higherKey(K key)                                                       | 지정된 key보다 큰 key 중에서 가장 가까운 key 반환, 없으면 null                         |
| Set<K>                | keySet()                                                               | Returns a Set view of the keys contained in this map.                                  |
| Map.Entry<K,V>        | lastEntry()                                                            | 마지막(가장 큰) Entry 반환                                                             |
| K                     | lastKey()                                                              | 마지막(가장 큰) key 반환                                                               |
| Map.Entry<K,V>        | lowerEntry(K key)                                                      | 지정된 key보다 작은 key 중에서 가장 가까운 Entry 반환, 없으면 null                     |
| K                     | lowerKey(K key)                                                        | 지정된 key보다 작은 key 중에서 가장 가까운 key 반환, 없으면 null                       |
| NavigableSet<K>       | navigableKeySet()                                                      | 모든 key가 담긴 NavigableSet 반환                                                      |
| Map.Entry<K,V>        | pollFirstEntry()                                                       | 제일 작은 key를 반환 하면서 제거                                                       |
| Map.Entry<K,V>        | pollLastEntry()                                                        | 제일 큰 key를 반환 하면서 제거                                                         |
| V                     | put(K key, V value)                                                    | Associates the specified value with the specified key in this map.                     |
| void                  | putAll(Map<? extends K,? extends V> map)                               | Copies all of the mappings from the specified map to this map.                         |
| V                     | remove(Object key)                                                     | Removes the mapping for this key from this TreeMap if present.                         |
| int                   | size()                                                                 | Returns the number of key-value mappings in this map.                                  |
| NavigableMap<K,V>     | subMap(K fromKey, boolean fromInclusive, K toKey, boolean toInclusive) | 지정된 두 key 사이의 모든 요소가 담긴 NavaigableMap 반환, Inclusive가 true면 key 포함. |
| SortedMap<K,V>        | subMap(K fromKey, K toKey)                                             | 지정된 두 key 사이의 모든 요소가 담긴 NavaigableMap 반환. toKey는 미포함.              |
| SortedMap<K,V>        | tailMap(K fromKey)                                                     | 지정된 key부터 마지막까지 범위의 SortedMap을 반환. fromKey는 미포함.                   |
| NavigableMap<K,V>     | tailMap(K fromKey, boolean inclusive)                                  | 지정된 key부터 마지막까지 범위의 NavigableMap 반환. inclusive가 true면 fromKey 포함.   |
| Collection<V>         | values()                                                               | 모든 value의 컬렉션 반환                                                               |

code 참조 - <https://github.com/castello/javajungsuk3/blob/master/source/ch11/TreeMapEx1.java>

## 12. Properties

- Hashtable을 상속받아 구현.
- <Object key, Object value> 대신 <String key, String value> 사용.
- 주로 애프리케이션의 환경설정과 관련된 속성(Property)를 저장하는데 사용

| Modifier and Type | Method                                                       | Description                                                                                        |
| ----------------- | ------------------------------------------------------------ | -------------------------------------------------------------------------------------------------- |
|                   | Properties()                                                 | Properties 생성                                                                                    |
|                   | Properties(int initialCapacity)                              | 초기 사이즈로 Properties 생성                                                                      |
|                   | Properties(Properties defaults)                              | 지정된 Properties를 가진 Properties 생성.                                                          |
| String            | getProperty(String key)                                      | key에 저장된 value 반환                                                                            |
| String            | getProperty(String key, String defaultValue)                 | key에 저장된 value 반환. 없으면 defaultValue 반환.                                                 |
| void              | list(PrintStream out)                                        | 지정된 PrintStream에 저장된 목록을 출력                                                            |
| void              | list(PrintWriter out)                                        | 지정된 PrintWriter에 저장된 목록을 출력                                                            |
| void              | load(InputStream inStream)                                   | 지정된 InputStream에서 목록을 읽어서 저장.                                                         |
| void              | load(Reader reader)                                          | 지정된 Reader에서 목록을 읽어서 저장.                                                              |
| void              | loadFromXML(InputStream in)                                  | 지정된 InputStream에서 XML문서를 읽어서 저장.                                                      |
| Enumeration<?>    | propertyNames()                                              | 모든 key가 담긴 Enumeration 반환                                                                   |
| void              | save(OutputStream out, String comments)                      | deprecated. store() 사용할 것.                                                                     |
| Object            | setProperty(String key, String value)                        | key에 value를 저장. key가 있으면 변경                                                              |
| void              | store(OutputStream out, String comments)                     | 저장된 목록을 OutputStream에 저장. comments는 목록에 대한 주석으로 저장.                           |
| void              | store(Writer writer, String comments)                        | 저장된 목록을 Writer에 저장. comments는 목록에 대한 주석으로 저장.                                 |
| void              | storeToXML(OutputStream os, String comment)                  | 저장된 목록을 OutputStream에 XML문서로 저장. comments는 목록에 대한 주석으로 저장.                 |
| void              | storeToXML(OutputStream os, String comment, String encoding) | 저장된 목록을 해당 인코딩으로 OutputStream에 XML문서로 저장. comments는 목록에 대한 주석으로 저장. |
| Set<String>       | stringPropertyNames()                                        | Properties에 저장된 모든 key를 Set으로 반환                                                        |

소스 참조 - <https://github.com/castello/javajungsuk3/blob/master/source/ch11/PropertiesEx1.java>

- HashMap의 구버전인 Hashtable을 상속이므로 Enumeration으로 순회

```java
class PropertiesEx3 {
  public static void main(String[] args) {
    Properties prop = new Properties();

    prop.setProperty("timeout","30");
    prop.setProperty("language","한글");
    prop.setProperty("size","10");
    prop.setProperty("capacity","10");

    try {
      prop.store(new FileOutputStream("output.txt"), "Properties Example");
      prop.storeToXML(new FileOutputStream("output.xml"),  "Properties Example");
    } catch(IOException e) {
      e.printStackTrace();
    }
  }
}
```

- xml은 한글을 유니코드로 저장함.

## 13. Collections

- 컬렉션과 관련된 메서드 제공
- fill(), copy(), sort(), binarySearch() 등의 메서드는 Collection과 Collections에 모두 있으며 같은 기능.

### 컬렉션의 동기화

- 멀티쓰레드 프로그래밍에서는 하나의 객체를 여러 쓰레드가 동시에 접근 할 수 있으므로 데이터의 일관성(consistency)을 유지하기 위해 동기화(synchronization)가 필요.
- Vector와 Hashtable은 자체적으로 동기화 처리, 컬렉션 프레임웤은 성능을 위해 필요한 경우 따로 사용.

```java
static Collection synchronizedCollection(Collection c);
static List       synchronizedList(List list);
static Set        synchronizedSet(Set s);
static Map        synchronizedMap(Map m);
static SortedSet  synchronizedSortedSet(SortedSet s);
static SortedMap  synchronizedSortedMap(SortedMap m);
```

```java
List syncList = Collections.synchronizedList(new ArrayList(...));
```

### 변경불가 컬렉션 만들기

- 읽기 전용으로 만들기

```java
static Collection   unmodifiableCollection(Collection c);
static List         unmodifiableList(List list);
static Set          unmodifiableSet(Set s);
static Map          unmodifiableMap(Map m);
static NavigableSet unmodifiableNavigableSet(NavigableSet s);
static SortedSet    unmodifiableSortedSet(SortedSet s);
static NavigableMap unmodifiableNavigableMap(NavigableMap m);
static SortedMap    unmodifiableSortedMap(SortedMap m);
```

### 싱글톤 컬렉션 만들기

- new가 아니라 메서드 만으로 생성 할 수 있게 함.

```java
static List singletonList(Object o);
static Set  singleton(Object o);
static Map  singletonMap(Object key,Object value);
```

메개 변수로 저장할 요소를 지정하면 해당 요소를 저장하는 컬렉션을 반환.

### 한 종류의 객체만 저장하는 컬렉션 만들기

- 컬렉션에 지정된 종류의 객체만 저장 가능
- 제네릭스(JDK 1.5)로도 가능. 호환성 문제로 존재

```java
static Collection   checkedCollection(Collection c, Class type);
static List         checkedList(List list, Class type);
static Set          checkedSet(Set s, Class type);
static Map          checkedMap(Map m, Class keyType, Class valueType);
static Queue        checkedQueue(Queue q, Class type);
static NavigableSet checkedNavigableSet(NavigableSet s, Class type);
static SortedSet    checkedSortedSet(SortedSet s, Class type);
static NavigableMap checkedNavigableMap(NavigableMap m, Class keyType, Class valueType);
static SortedMap    checkedSortedMap(SortedMap m, Class keyType, Class valueType);
```

```java
List list = new ArrayList();
List checkedList = checkedList(list, String.class); // String만 저장 가능
checkedList.add("abc");
checkedList.add(123);     // Error. ClassCastException 발생
```

## 14. 컬렉션 크래스 정의 & 요약

![컬렉션 클래스간의 관계](images/11%20컬렉션%20프레임웍_컬렉션%20클래스간의%20관계.png)

|    컬렉션     | 특 징                                                                                                   |
| :-----------: | ------------------------------------------------------------------------------------------------------- |
|   ArrayList   | 배열기반. 데이터의 추가/삭제에 불리, 순차적인 추가/삭제는 제일 빠름. 임의의 요소에 대한 접근성이 뛰어남 |
|  LinkedList   | 연결기반. 데이터의 추가/삭제에 유리. 임의의 요소에 대한 접근이 좋지 않음                                |
|    HashMap    | 배열과 연결이 결합된 형태. 추가, 삭제, 검색, 접근성이 모두 뛰어남. 검색에는 최고의 성능을 보임.         |
|    TreeMap    | 연결기반. 정렬과 검색(범위검색)에 적합. 검색성능은 HashMap보다 떨어짐                                   |
|     Stack     | Vector를 상속받아 구현                                                                                  |
|     Queue     | LinkedList로 Queue인터페이스를 구현                                                                     |
|  Properties   | Hashtable을 상속받아 구현                                                                               |
|    HashSet    | HashMap를 이용해서 구현                                                                                 |
|    TreeSet    | TreeMap을 이용해서 구현                                                                                 |
| LinkedHashMap | HashMap에 저장순서유지기능을 추가함.                                                                    |
| LinkedHashSet | HashSet에 저장순서유지기능을 추가함.                                                                    |
