# 3. Threads and Concurrency

- [3.1 스레드(Thread)](#31-스레드thread)
- [3.2 Concurrency(병행성, 동시성)](#32-concurrency병행성-동시성)
- [출처](#출처)

## 3.1 스레드(Thread)

프로세스에서 실행 되는 여러 흐름의 단위

![Thread](images/Thread.png)

- Stack만 따로 할당
- 프로세스 내의 주소 공간이나 자원(힙 등)을 공유하며 실행
- 한 스레드가 프로세스 자원을 변경하면, 다른 이웃 스레드도 변경 즉시 결과를 알 수 있음.

Java 스레드

- JVM이 운영체제의 역할
- 프로세스가 존재하지 않고, 스레드만 존재
- JVM에 의해 스케줄 되는 실행 단위 코드 블록
- JVM이 관리하는 정보
  - 스레드 갯수
  - 스레드로 실행되는 코드의 메모리 위치
  - 스레드의 상태
  - 스레드 우선순위

멀티 프로세스와 멀티 스레드

| 구분                  | 멀티 프로세스                                        | 멀티 스레드                                                                 |
| --------------------- | ---------------------------------------------------- | --------------------------------------------------------------------------- |
| 용어                  | 여러 프로세스로 구성하여 각 프로세스가 작업을 처리   | 여러개의 스레드로 구성하고 각 스레드가 작업을 처리                          |
| 메모리 공간           | 독립적 공간                                          | 프로세스 자원 공유, 단 stack은 독립                                         |
| Context Switching     | 오버헤드(캐시 메모리 초기화)가 큼.                   | 캐쉬 초기화 필요 없음.                                                      |
| 안정성                | 자식 프로세스에 문제가 발생하면 자식 프로세스만 죽음 | 한 스레드에 문제가 발생하면 전체 스레드가 종료                              |
| 메모리 공간, CPU 사용 | 많음                                                 | 적음                                                                        |
| 통신                  | IPC를 통해서 해야함                                  | 공유(Stack 제외)                                                            |
| 기타                  |                                                      | 디버깅이 어려움. 다른 프로세스의 스레드는 제어 불가. 동기화 문제(데드락 등) |

## 3.2 Concurrency(병행성, 동시성)

- 여러 작업을 한 번에 수행하는 시스템의 특성
- 장점 - 응답 시간 최소화, 처리량 최대화
- 단점 - 부정확할 수 있음. 원인 - 교착 상태(deadlock), 기아 상태(starvation)

  ![](images/02%20General%20Knowledge_Concurrency_vs_Parallelism.png)

- Concurrency(병행성) - 각 cpu의 스케줄
- Parallelism(병렬) - 두 cpu는 Parallel하게 동작

---

## 출처

- Concurrency (computer science) <https://en.wikipedia.org/wiki/Concurrency_(computer_science)>
